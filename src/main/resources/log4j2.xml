<?xml version="1.0" encoding="UTF-8"?>
<!--log級別: OFF > FATAL > ERROR > WARN > INFO > DEBUG > TRACE > ALL -->
<!--Configuration后面的status，这个用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，你会看到log4j2内部各种详细输出-->
<!--monitorInterval：Log4j能够自动检测修改配置 文件和重新配置本身，设置间隔秒数-->
<configuration status="WARN" monitorInterval="30">
    <!-- 所有的appender -->
    <appenders>
        <!-- 輸出到控制台的配置 -->
        <console name="Console" target="SYSTEM_OUT">
            <!-- 輸出的格式 -->
            <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] [%t] - %l - %m%n"/>
        </console>
        <!-- 只輸出這次執行的訊息，因為不會有前一次執行的資訊，所以debug時可以用 -->
        <File name="CurrentLog" fileName="log/current.log" append="false">
            <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] [%t] - %l - %m%n"/>
        </File>
        <!-- 切分log檔案的設定 -->
        <RollingFile name="RollingFileInfo" fileName="log/info/info.log"
                     filePattern="log/info/$${date:yyyy-MM}/%d{yyyy-MM-dd}-%i.log">
            <!-- 額外的級別設定 -->
            <ThresholdFilter level="info" onMatch="ACCEPT" onMismatch="DENY"/>
            <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] [%t] - %l - %m%n"/>
            <Policies>
                <!-- 依照時間切分檔案，單位為filePattern裡時間的最小單位 -->
                <TimeBasedTriggeringPolicy interval="1" modulate="true" />
                <!-- 依照檔案大小切分檔案 -->
                <SizeBasedTriggeringPolicy size="100 MB"/>
            </Policies>
            <!-- 最多切分多少個檔案，預設為7個，只跟因檔案大小而被切分的檔案有關-->
            <DefaultRolloverStrategy max="20"/>
        </RollingFile>
        <RollingFile name="RollingFileError" fileName="log/error/error.log"
                     filePattern="log/error/$${date:yyyy-MM}/error-%d{yyyy-MM-dd}-%i.log">
            <ThresholdFilter level="error" onMatch="ACCEPT" onMismatch="DENY"/>
            <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] [%t] - %l - %m%n"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true" />
                <SizeBasedTriggeringPolicy size="100 MB"/>
            </Policies>
            <DefaultRolloverStrategy max="20"/>
        </RollingFile>
    </appenders>

    <!-- 定義loggers -->
    <loggers>
        <root level="all">
            <!-- 只顯示這次執行的log, 主要是debug用 -->
            <appender-ref ref="CurrentLog"/>

            <appender-ref ref="Console"/>
            <appender-ref ref="RollingFileInfo"/>
            <appender-ref ref="RollingFileWarn"/>
            <appender-ref ref="RollingFileError"/>
        </root>
    </loggers>
</configuration>